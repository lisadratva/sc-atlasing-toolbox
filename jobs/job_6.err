/tmp/1740502787.973529.shell: line 16: activate: No such file or directory
++ realpath ../sc-atlassing-toolbox
+ pipeline=/nfs/team205/ld21/repos/sc-atlassing-toolbox
+ snakemake --profile .profiles/local --configfile configs/resources.yaml configs/load_config.yaml configs/marker_genes.yaml configs/outputs.yaml configs/t_cells_0612.yaml --snakefile /nfs/team205/ld21/repos/sc-atlassing-toolbox/workflow/Snakefile --use-conda --rerun-incomplete --keep-going --printshellcmds clustering_all -c 10
Using profile .profiles/local for setting default command line arguments.
Config file configs/outputs.yaml is extended by additional config specified via the command line.
WARNING:ModuleConfig: No default target specified for module "collect", using default:
"/nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/collect/dataset~{dataset}.zarr..."
WARNING:ModuleConfig: No default target specified for module "uncollect", using default:
"/nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/uncollect/dataset~{dataset}/file_id~{file_id}/new_file_id~{new_file_id}.zarr..."
WARNING:ModuleConfig: No default target specified for module "exploration", using default:
"/nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/exploration/dataset~{dataset}/file_id~{file_id}.zarr..."
WARNING:ModuleConfig: No default target specified for module "sample_representation", using default:
"/nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/sample_representation/dataset~{dataset}/file_id~{file_id}/method~{method}/input_type~{input_type}/use_rep~{use_rep}/var_mask~{var_mask}.zarr..."
WARNING:ModuleConfig: No default target specified for module "batch_analysis", using default:
"/nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/batch_analysis/dataset~{dataset}/file_id~{file_id}.zarr..."
WARNING:ModuleConfig: No default target specified for module "doublets", using default:
"/nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/doublets/dataset~{dataset}/file_id~{file_id}.zarr..."
WARNING:ModuleConfig: No default target specified for module "subset", using default:
"/nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/subset/dataset~{dataset}/file_id~{file_id}/strategy~{strategy}.zarr..."
WARNING:ModuleConfig: No default target specified for module "label_transfer", using default:
"/nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/label_transfer/dataset~{dataset}/file_id~{file_id}.zarr..."
WARNING:ModuleConfig: No default target specified for module "integration", using default:
"/nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/integration/dataset~{dataset}/file_id~{file_id}/method~{method}/batch~{batch}/label~{label}/var_mask~{var_mask}/output_type~{output_type}.zarr..."
WARNING:ModuleConfig: No default target specified for module "marker_genes", using default:
"/nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/marker_genes/dataset~{dataset}/file_id~{file_id}.zarr..."
Building DAG of jobs...
Using shell: /usr/local/bin/bash
Provided cores: 10
Rules claiming more threads will be scaled down.
Singularity containers: ignored
Job stats:
job                              count
-----------------------------  -------
clustering_all                       1
clustering_cluster                   3
clustering_merge                     1
clustering_plot_evaluation           1
clustering_plot_umap                 1
clustering_plot_umap_clusters        1
total                                8

Select jobs to execute...

[Tue Feb 25 20:54:33 2025]
rule clustering_cluster:
    input: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/neighbors/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~None/resolution~None/level~1.zarr
    output: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~0.7/level~1.zarr
    jobid: 188
    reason: Missing output files: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~0.7/level~1.zarr
    wildcards: dataset=t_cells, file_id=label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f, algorithm=leiden, resolution=0.7, level=1
    resources: tmpdir=/tmp, partition=, qos=, mem_mb=, gpu=

[Tue Feb 25 20:54:35 2025]
rule clustering_cluster:
    input: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/neighbors/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~None/resolution~None/level~1.zarr
    output: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~1.3/level~1.zarr
    jobid: 191
    reason: Missing output files: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~1.3/level~1.zarr
    wildcards: dataset=t_cells, file_id=label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f, algorithm=leiden, resolution=1.3, level=1
    resources: tmpdir=/tmp, partition=, qos=, mem_mb=, gpu=

[Tue Feb 25 20:54:35 2025]
rule clustering_cluster:
    input: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/neighbors/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~None/resolution~None/level~1.zarr
    output: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~0.5/level~1.zarr
    jobid: 187
    reason: Missing output files: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~0.5/level~1.zarr
    wildcards: dataset=t_cells, file_id=label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f, algorithm=leiden, resolution=0.5, level=1
    resources: tmpdir=/tmp, partition=, qos=, mem_mb=, gpu=

python -c "from __future__ import print_function; import sys, json; print(json.dumps([sys.version_info.major, sys.version_info.minor]))"
Activating conda environment: rapids_singlecell
python -c "from __future__ import print_function; import sys, json; print(json.dumps([sys.version_info.major, sys.version_info.minor]))"
Activating conda environment: rapids_singlecell
python -c "from __future__ import print_function; import sys, json; print(json.dumps([sys.version_info.major, sys.version_info.minor]))"
Activating conda environment: rapids_singlecell
python /nfs/team205/ld21/repos/sc-atlassing-toolbox/.snakemake/scripts/tmpucplz369.clustering.py
python /nfs/team205/ld21/repos/sc-atlassing-toolbox/.snakemake/scripts/tmpn21ip395.clustering.py
python /nfs/team205/ld21/repos/sc-atlassing-toolbox/.snakemake/scripts/tmpp9_9qonq.clustering.py
Activating conda environment: rapids_singlecell
Activating conda environment: rapids_singlecell
Activating conda environment: rapids_singlecell
INFO:root:Read anndata file /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/neighbors/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~None/resolution~None/level~1.zarr...
INFO:root:Read anndata file /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/neighbors/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~None/resolution~None/level~1.zarr...
INFO:root:Read anndata file /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/neighbors/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~None/resolution~None/level~1.zarr...
INFO:root:Select neighbors for "neighbors"...
INFO:root:Select neighbors for "neighbors"...
INFO:root:Select neighbors for "neighbors"...
INFO:root:Error importing rapids found...

INFO:root:Error importing rapids found...

INFO:root:Error importing rapids found...

INFO:root:leiden clustering with {'key_added': 'leiden_0.7_1', 'resolution': 0.7, 'flavor': 'igraph', 'n_iterations': 2} for 3783527 cells...
INFO:root:leiden clustering with {'key_added': 'leiden_1.3_1', 'resolution': 1.3, 'flavor': 'igraph', 'n_iterations': 2} for 3783527 cells...
INFO:root:leiden clustering with {'key_added': 'leiden_0.5_1', 'resolution': 0.5, 'flavor': 'igraph', 'n_iterations': 2} for 3783527 cells...
INFO:root:Write leiden_1.3_1 to /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~1.3/level~1.zarr...
INFO:root:Write leiden_0.7_1 to /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~0.7/level~1.zarr...
[Tue Feb 25 21:09:08 2025]
Finished job 191.
1 of 8 steps (12%) done
[Tue Feb 25 21:09:08 2025]
Finished job 188.
2 of 8 steps (25%) done
INFO:root:Write leiden_0.5_1 to /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~0.5/level~1.zarr...
[Tue Feb 25 21:09:30 2025]
Finished job 187.
3 of 8 steps (38%) done
Select jobs to execute...

[Tue Feb 25 21:09:30 2025]
rule clustering_merge:
    input: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/umap/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f.zarr, /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~0.1/level~1.zarr, /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~0.3/level~1.zarr, /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~0.5/level~1.zarr, /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~0.7/level~1.zarr, /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~0.9/level~1.zarr, /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~1.1/level~1.zarr, /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~1.3/level~1.zarr, /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~1.5/level~1.zarr
    output: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f.zarr
    jobid: 1
    reason: Missing output files: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f.zarr; Input files updated by another job: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~0.5/level~1.zarr, /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~1.3/level~1.zarr, /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/resolutions/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/algorithm~leiden/resolution~0.7/level~1.zarr
    wildcards: dataset=t_cells, file_id=label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f
    resources: tmpdir=/tmp

python -c "from __future__ import print_function; import sys, json; print(json.dumps([sys.version_info.major, sys.version_info.minor]))"
Activating conda environment: scanpy
python /nfs/team205/ld21/repos/sc-atlassing-toolbox/.snakemake/scripts/tmpob514wqj.merge.py
Activating conda environment: scanpy
[Tue Feb 25 21:11:03 2025]
Finished job 1.
4 of 8 steps (50%) done
Select jobs to execute...

[Tue Feb 25 21:11:03 2025]
rule clustering_plot_evaluation:
    input: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f.zarr
    output: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/images/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/evaluation
    jobid: 195
    reason: Missing output files: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/images/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/evaluation; Input files updated by another job: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f.zarr
    wildcards: dataset=t_cells, file_id=label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f
    resources: tmpdir=/tmp

[Tue Feb 25 21:11:03 2025]
rule clustering_plot_umap:
    input: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f.zarr
    output: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/images/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/umap
    jobid: 194
    reason: Missing output files: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/images/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/umap; Input files updated by another job: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f.zarr
    wildcards: dataset=t_cells, file_id=label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f
    resources: tmpdir=/tmp, partition=, qos=

[Tue Feb 25 21:11:03 2025]
rule clustering_plot_umap_clusters:
    input: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f.zarr
    output: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/images/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/umap_clusters
    jobid: 193
    reason: Missing output files: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/images/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/umap_clusters; Input files updated by another job: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f.zarr
    wildcards: dataset=t_cells, file_id=label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f
    resources: tmpdir=/tmp, partition=, qos=

python -c "from __future__ import print_function; import sys, json; print(json.dumps([sys.version_info.major, sys.version_info.minor]))"
Activating conda environment: scanpy
python -c "from __future__ import print_function; import sys, json; print(json.dumps([sys.version_info.major, sys.version_info.minor]))"
Activating conda environment: scanpy
python -c "from __future__ import print_function; import sys, json; print(json.dumps([sys.version_info.major, sys.version_info.minor]))"
Activating conda environment: scanpy
python /nfs/team205/ld21/repos/sc-atlassing-toolbox/.snakemake/scripts/tmpq4cu4cqe.plot.py
python /nfs/team205/ld21/repos/sc-atlassing-toolbox/.snakemake/scripts/tmp0wng1msq.plot.py
python /nfs/team205/ld21/repos/sc-atlassing-toolbox/.snakemake/scripts/tmpa1llo513.plot_enrichment.py
Activating conda environment: scanpy
Activating conda environment: scanpy
Activating conda environment: scanpy
INFO:root:Wildcard string: dataset: t_cells
file_id: label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f...
INFO:root:Read file /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f.zarr...
INFO:root:Wildcard string: dataset: t_cells
file_id: label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f...
INFO:root:Read file /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f.zarr...
INFO:root:Read /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f.zarr...
INFO:root:Read /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f.zarr...
  0%|          | 0/6 [00:00<?, ?it/s]INFO:root:Configured colors:
['leiden_0.1_1',
 'leiden_0.3_1',
 'leiden_0.5_1',
 'leiden_0.7_1',
 'leiden_0.9_1',
 'leiden_1.1_1',
 'leiden_1.3_1',
 'leiden_1.5_1']
INFO:root:Colors after filtering:
['leiden_0.1_1',
 'leiden_0.3_1',
 'leiden_0.5_1',
 'leiden_0.7_1',
 'leiden_0.9_1',
 'leiden_1.1_1',
 'leiden_1.3_1',
 'leiden_1.5_1']
INFO:root:Configured colors:
['dataset_id',
 'Lindeboom_broad',
 'tissue',
 'pathogen',
 'group',
 'reannotation_index']
INFO:root:Colors after filtering:
['dataset_id',
 'Lindeboom_broad',
 'tissue',
 'pathogen',
 'group',
 'reannotation_index']
INFO:root:Remove outliers...
INFO:root:Shuffle cells...
INFO:root:Remove outliers...
INFO:root:Shuffle cells...
INFO:root:Subset to requested genes...
INFO:root:Subset to requested genes...
INFO:root:Parameters:
{'basis': 'X_umap', 'legend_loc': 'on data', 'size': 0.4}
  0%|          | 0/8 [00:00<?, ?it/s]INFO:root:Plot color "leiden_0.1_1"...
INFO:root:Parameters:
{'basis': 'X_umap', 'size': 0.4}
  0%|          | 0/6 [00:00<?, ?it/s]INFO:root:Plot color "Lindeboom_broad"...
 12%|█▎        | 1/8 [00:19<02:15, 19.35s/it]INFO:root:Plot color "leiden_1.3_1"...
 17%|█▋        | 1/6 [00:20<01:41, 20.33s/it]INFO:root:Plot color "group"...
 25%|██▌       | 2/8 [00:38<01:56, 19.37s/it]INFO:root:Plot color "leiden_0.3_1"...
 33%|███▎      | 2/6 [00:41<01:23, 20.99s/it]INFO:root:Plot color "dataset_id"...
 38%|███▊      | 3/8 [00:58<01:37, 19.42s/it]INFO:root:Plot color "leiden_0.5_1"...
 50%|█████     | 3/6 [01:01<01:01, 20.45s/it]INFO:root:Plot color "tissue"...
 50%|█████     | 4/8 [01:17<01:17, 19.38s/it]INFO:root:Plot color "leiden_1.1_1"...
 17%|█▋        | 1/6 [02:06<10:30, 126.07s/it] 67%|██████▋   | 4/6 [01:20<00:40, 20.03s/it]INFO:root:Plot color "reannotation_index"...
 62%|██████▎   | 5/8 [01:36<00:57, 19.24s/it]INFO:root:Plot color "leiden_0.9_1"...
 83%|████████▎ | 5/6 [01:41<00:20, 20.32s/it]INFO:root:Plot color "pathogen"...
 75%|███████▌  | 6/8 [01:55<00:38, 19.20s/it]INFO:root:Plot color "leiden_1.5_1"...
100%|██████████| 6/6 [02:01<00:00, 20.12s/it]100%|██████████| 6/6 [02:01<00:00, 20.26s/it]
[Tue Feb 25 21:14:35 2025]
Finished job 194.
5 of 8 steps (62%) done
 88%|████████▊ | 7/8 [02:14<00:19, 19.19s/it]INFO:root:Plot color "leiden_0.7_1"...
100%|██████████| 8/8 [02:33<00:00, 19.17s/it]100%|██████████| 8/8 [02:33<00:00, 19.24s/it]
[Tue Feb 25 21:15:07 2025]
Finished job 193.
6 of 8 steps (75%) done
 33%|███▎      | 2/6 [04:12<08:24, 126.22s/it] 50%|█████     | 3/6 [06:07<06:03, 121.13s/it] 67%|██████▋   | 4/6 [08:02<03:57, 118.86s/it] 83%|████████▎ | 5/6 [10:15<02:03, 123.66s/it]100%|██████████| 6/6 [12:58<00:00, 137.13s/it]100%|██████████| 6/6 [12:58<00:00, 129.72s/it]
[Tue Feb 25 21:24:46 2025]
Finished job 195.
7 of 8 steps (88%) done
Select jobs to execute...

[Tue Feb 25 21:24:46 2025]
localrule clustering_all:
    input: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f.zarr, /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/images/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/umap_clusters, /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/images/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/umap, /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/images/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/evaluation
    jobid: 0
    reason: Input files updated by another job: /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/images/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/evaluation, /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/out/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f.zarr, /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/images/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/umap_clusters, /nfs/team205/tcr_pipeline/datasets/pan_infection_atlas/snakemake_toolbox/images/clustering/dataset~t_cells/file_id~label_harmonization:integration:merge:t_cells--integration_method=scvi--integration_batch=dataset_id--integration_label=None--integration_var_mask=None--integration_output_type=embed--integration_hyperparams=e774194f5f/umap
    resources: tmpdir=/tmp

[Tue Feb 25 21:24:46 2025]
Finished job 0.
8 of 8 steps (100%) done
Complete log: .snakemake/log/2025-02-25T205334.346840.snakemake.log
